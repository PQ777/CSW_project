<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://www.gstatic.com/firebasejs/9.6.8/firebase-SERVICE.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-database.js"></script>
    <script type = "text/javascript" src = "db/app.js"></script>
	<!--Google Login정보 js-->
    <script type = "text/javascript" src = "googleLogin.js"></script> 
	<!--firebase database js-->
    <script type = "text/javascript" src = "db/database.js"></script>
    <title>Document</title>
    <link rel="stylesheet" type="text/css"
          href="./visualize.css" />
    <link rel="stylesheet" type="text/css"
          href="./visualize-light.css" />
    <script type="text/javascript"
            src="http://code.jquery.com/jquery-1.9.0.js"></script>
    <script type="text/javascript" src="./visualize.jQuery.js"></script>
    <script type="text/javascript">
        $(function () {
            $('#data').visualize({type: 'bar'});
            $('#data').visualize({type: 'area', width: '400px' });
            $('#data').visualize({type: 'pie', pieLabelPos: 'inside' });
            $('#data').visualize({type: 'line', lineWeight: 2});
        });
    </script>
</head>
<body>
    <table id="data">
        <caption>2012년 하기 경비</caption>
        <thead>
        <tr>
            <td></td><th>현제</th><th>30분전</th><th>60분전</th>
            <th>90분전</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <th>초미세먼지</th><td id = "PM_last_2"></td><td>224</td><td>205</td>
            <td>187</td>
        </tr>
        <tr>
            <th>오존</th><td>211</td><td>175</td><td>110</td>
            <td>199</td>
        </tr>
        <tr>
            <th>일산화탄소</th><td>111</td><td>101</td><td>99</td>
            <td>121</td>
        </tr>
        <tr>
            <th>이산화탄소</th><td>101</td><td>99</td><td>87</td>
            <td>96</td>
        </tr>
        <tr>
            <th>그 외 잡비</th><td>124</td><td>108</td><td>99</td>
            <td>101</td>
        </tr>
        </tbody>
    </table>

    <script>

        firebase.database().ref('airQuality/2-pushJSON/').limitToLast(4).on('child_added', function(snapshot){
                console.log(snapshot.child("PM").val())
                var PM_last = snapshot.child("PM").val();

                document.getElementById('PM_last').outerText = PM_last;

                //document.write(PM_last + "<br>");


                // for(var i in snapshot.val()){
                //     document.write(i +" : " + snapshot.val()[i] + "<br>" + "<br>")

                //     var PM = snapshot.val()[i].PM;

                //     document.getElementById('PM').innerHTML = PM;
                // }
            });

            firebase.database().ref('airQuality/2-pushJSON/').limitToLast(3).on('child_added', function(snapshot){
                console.log(snapshot.child("PM").val())
                var PM_last_2 = snapshot.child("PM").val();

                document.getElementById('PM_last_2').outerText = PM_last_2;


            });

            firebase.database().ref('airQuality/2-pushJSON/').limitToLast(2).on('child_added', function(snapshot){
        console.log(snapshot.child("PM").val())
        var PM_last_3 = snapshot.child("PM").val();

        document.getElementById('PM_last_3').outerText = PM_last_3;

    });

    </script>
</body>
</html>